<!DOCTYPE html>
<html title="Sudoku">
    <head>
        <link rel="stylesheet" href="web.css">
        <script>
            const templates = [[[[3, 0, 0, 5, 0, 7, 0, 6, 1], [0, 0, 0, 0, 0, 0, 0, 0, 9], [0, 0, 0, 9, 0, 0, 0, 3, 0], [0, 4, 0, 0, 7, 0, 0, 0, 3], [0, 0, 2, 8, 0, 3, 0, 0, 0], [0, 0, 3, 4, 0, 2, 6, 0, 0], [2, 0, 7, 0, 8, 0, 0, 0, 0], [0, 0, 0, 0, 3, 0, 0, 0, 6], [0, 0, 0, 0, 4, 0, 0, 0, 2]], [[4, 0, 0, 0, 0, 0, 8, 5, 0], [0, 0, 0, 0, 4, 0, 6, 1, 0], [0, 0, 1, 0, 5, 0, 0, 0, 0], [0, 0, 0, 4, 0, 6, 0, 0, 1], [0, 8, 0, 0, 0, 7, 2, 4, 0], [1, 4, 7, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 2, 8, 0, 0, 0], [0, 9, 0, 0, 0, 0, 0, 0, 8], [2, 0, 8, 6, 0, 0, 0, 0, 0]], [[0, 7, 0, 1, 0, 8, 0, 0, 0], [4, 1, 0, 0, 0, 0, 3, 0, 0], [0, 5, 0, 7, 0, 0, 0, 0, 0], [8, 0, 5, 9, 2, 3, 0, 4, 0], [0, 0, 2, 0, 0, 0, 8, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 5], [0, 0, 0, 4, 0, 0, 0, 8, 0], [0, 3, 0, 0, 8, 6, 0, 0, 0], [0, 0, 0, 0, 0, 5, 0, 6, 2]], [[0, 0, 6, 2, 9, 0, 0, 0, 5], [0, 0, 0, 0, 0, 0, 9, 2, 6], [0, 0, 3, 0, 0, 0, 0, 0, 0], [0, 0, 0, 6, 0, 0, 0, 5, 0], [0, 0, 0, 1, 0, 0, 0, 0, 2], [0, 2, 5, 0, 0, 8, 0, 0, 0], [0, 0, 4, 8, 0, 0, 0, 0, 0], [5, 1, 2, 0, 6, 0, 0, 0, 0], [9, 0, 8, 7, 0, 0, 0, 0, 3]], [[3, 0, 0, 0, 0, 0, 1, 4, 0], [1, 0, 0, 0, 0, 0, 0, 0, 3], [0, 6, 5, 0, 4, 1, 0, 0, 0], [0, 0, 4, 6, 2, 0, 0, 0, 9], [7, 0, 0, 0, 0, 5, 3, 0, 4], [0, 9, 0, 7, 0, 0, 0, 0, 2], [0, 3, 0, 0, 1, 0, 0, 5, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 3, 0, 0, 8, 0]], [[0, 9, 0, 0, 0, 5, 0, 7, 0], [0, 1, 7, 0, 0, 0, 0, 0, 2], [0, 0, 0, 7, 0, 0, 0, 0, 5], [6, 0, 3, 5, 0, 0, 9, 0, 0], [0, 4, 1, 6, 9, 0, 0, 0, 8], [0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 7, 0, 0, 0, 0, 4, 0, 3], [4, 0, 0, 1, 0, 0, 0, 0, 9], [2, 0, 9, 0, 0, 0, 0, 0, 0]], [[0, 0, 0, 0, 0, 0, 0, 0, 0], [8, 0, 0, 4, 0, 5, 0, 0, 9], [6, 0, 0, 0, 0, 0, 2, 0, 0], [1, 0, 0, 0, 0, 0, 0, 0, 0], [0, 9, 0, 1, 0, 6, 0, 2, 0], [0, 0, 0, 9, 0, 2, 0, 0, 0], [0, 5, 0, 0, 0, 0, 0, 0, 0], [0, 8, 1, 0, 0, 0, 7, 0, 0], [7, 0, 9, 0, 8, 4, 0, 0, 0]], [[5, 0, 0, 4, 0, 0, 0, 0, 0], [6, 0, 0, 0, 0, 2, 0, 0, 0], [0, 0, 2, 0, 0, 6, 3, 1, 9], [0, 7, 0, 0, 0, 1, 0, 3, 6], [0, 0, 0, 6, 9, 0, 0, 0, 1], [0, 0, 0, 0, 0, 0, 9, 0, 7], [0, 2, 0, 0, 4, 0, 0, 9, 0], [0, 3, 0, 0, 0, 0, 0, 0, 0], [0, 5, 4, 0, 0, 0, 0, 6, 0]], [[4, 0, 0, 0, 0, 8, 0, 0, 0], [7, 0, 8, 0, 0, 0, 0, 0, 4], [0, 0, 0, 4, 2, 0, 0, 6, 0], [0, 0, 3, 8, 0, 0, 0, 0, 0], [0, 8, 0, 0, 0, 0, 4, 5, 0], [0, 2, 0, 0, 0, 0, 0, 0, 0], [0, 0, 1, 0, 8, 0, 6, 0, 0], [3, 7, 0, 0, 5, 4, 0, 0, 0], [0, 0, 0, 2, 1, 9, 0, 0, 7]], [[0, 8, 0, 6, 0, 0, 0, 0, 0], [0, 0, 0, 0, 7, 3, 4, 5, 0], [5, 4, 0, 0, 0, 1, 6, 7, 8], [1, 6, 0, 0, 0, 8, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 8, 0], [0, 2, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 1, 0, 0, 9, 4, 5], [0, 0, 0, 9, 0, 0, 7, 0, 0], [0, 0, 0, 4, 5, 0, 0, 0, 0]]], [[[0, 2, 0, 0, 0, 6, 7, 0, 0], [0, 5, 4, 0, 0, 0, 0, 0, 1], [0, 0, 9, 0, 0, 0, 2, 0, 0], [0, 0, 7, 0, 0, 0, 6, 3, 0], [6, 0, 0, 0, 1, 0, 5, 0, 0], [0, 0, 0, 0, 0, 4, 0, 0, 0], [5, 0, 0, 0, 0, 1, 0, 0, 3], [0, 0, 0, 0, 0, 0, 0, 1, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0]], [[8, 0, 3, 0, 0, 0, 0, 0, 0], [0, 0, 0, 2, 0, 8, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 2, 0, 0, 0, 0, 3, 0, 4], [0, 0, 0, 6, 8, 9, 0, 0, 1], [0, 0, 1, 3, 0, 0, 0, 0, 7], [0, 4, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 5, 0, 4, 0, 0], [0, 0, 0, 0, 3, 0, 0, 5, 0]], [[0, 0, 0, 0, 0, 0, 6, 0, 4], [0, 4, 8, 9, 0, 0, 0, 0, 0], [0, 0, 2, 0, 0, 0, 0, 9, 0], [0, 0, 0, 1, 0, 8, 2, 0, 0], [0, 7, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 6, 0, 2, 0, 4, 3], [0, 0, 0, 0, 0, 1, 0, 0, 0], [0, 0, 0, 8, 5, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 9]], [[0, 9, 1, 0, 8, 2, 0, 3, 7], [0, 0, 0, 0, 1, 0, 0, 0, 0], [0, 0, 2, 0, 0, 0, 1, 0, 0], [7, 0, 0, 0, 0, 0, 0, 0, 9], [0, 2, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 4, 9, 0, 7, 0], [0, 5, 0, 0, 0, 0, 0, 0, 0], [2, 4, 0, 0, 0, 0, 0, 0, 6], [0, 0, 0, 0, 0, 0, 0, 0, 0]], [[0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 6, 0, 0, 0, 0, 0, 3, 0], [0, 1, 0, 0, 7, 9, 0, 0, 0], [0, 0, 0, 0, 9, 0, 0, 6, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 9, 0, 0, 0, 6, 0, 0, 0], [0, 0, 0, 0, 4, 8, 5, 7, 0], [0, 0, 8, 0, 2, 0, 3, 4, 0], [0, 0, 0, 6, 0, 0, 2, 0, 0]], [[0, 0, 0, 0, 0, 7, 3, 0, 0], [0, 0, 0, 0, 0, 4, 0, 0, 0], [7, 0, 0, 0, 0, 1, 0, 0, 5], [0, 0, 0, 0, 0, 0, 0, 7, 0], [0, 8, 7, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 7, 0, 5, 0, 3], [0, 3, 6, 0, 0, 0, 4, 0, 0], [4, 2, 0, 0, 0, 0, 0, 0, 6], [9, 0, 0, 0, 0, 0, 0, 0, 0]], [[0, 0, 2, 0, 0, 0, 0, 0, 0], [0, 8, 0, 6, 0, 0, 0, 0, 0], [0, 4, 3, 0, 7, 0, 0, 0, 0], [0, 0, 8, 0, 5, 0, 0, 0, 0], [0, 0, 0, 3, 0, 4, 0, 0, 2], [5, 0, 0, 0, 0, 0, 7, 0, 0], [3, 0, 0, 5, 0, 0, 6, 0, 0], [0, 0, 6, 9, 0, 3, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0]], [[0, 0, 0, 0, 0, 6, 0, 0, 5], [0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 2, 0, 0, 0, 3, 8], [0, 1, 5, 0, 0, 0, 0, 0, 0], [9, 0, 0, 0, 0, 2, 0, 0, 7], [2, 0, 0, 0, 0, 1, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 3, 5, 9, 0, 0, 1], [8, 9, 0, 1, 0, 0, 0, 0, 0]], [[0, 0, 1, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 8, 4, 0, 7, 9], [4, 5, 0, 0, 0, 0, 0, 0, 0], [5, 0, 0, 0, 0, 8, 1, 9, 0], [0, 0, 8, 0, 0, 0, 0, 0, 0], [3, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 5, 0, 0, 0, 0, 0, 4], [0, 9, 0, 0, 0, 2, 0, 1, 7], [0, 0, 0, 0, 0, 0, 0, 0, 0]], [[0, 0, 0, 0, 0, 0, 6, 0, 0], [0, 0, 2, 0, 0, 0, 0, 7, 0], [9, 7, 0, 0, 6, 2, 0, 0, 0], [7, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 5, 0, 0, 6, 0, 0, 0], [4, 0, 0, 2, 0, 0, 0, 0, 0], [0, 0, 9, 0, 4, 0, 0, 0, 8], [5, 0, 0, 9, 0, 0, 0, 0, 0], [0, 4, 0, 0, 7, 0, 0, 0, 0]]], [[[0, 0, 0, 0, 0, 0, 0, 0, 0], [8, 0, 0, 0, 0, 9, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 5, 0, 0, 0, 0, 0, 0, 4], [0, 0, 0, 0, 0, 0, 1, 0, 0], [2, 0, 0, 1, 0, 4, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 9, 0, 0, 0, 6, 0], [0, 0, 0, 4, 0, 2, 9, 0, 8]], [[0, 6, 0, 0, 0, 0, 0, 0, 0], [0, 0, 3, 0, 8, 0, 2, 0, 0], [8, 2, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 8, 0], [0, 0, 0, 2, 0, 0, 0, 0, 0], [2, 0, 0, 8, 0, 0, 0, 0, 0], [0, 3, 4, 0, 0, 0, 6, 0, 0], [0, 0, 0, 0, 0, 0, 0, 2, 0]], [[0, 0, 0, 0, 8, 0, 0, 0, 0], [0, 8, 0, 0, 0, 0, 0, 0, 0], [0, 0, 4, 0, 6, 0, 0, 9, 0], [0, 3, 0, 0, 0, 0, 9, 0, 0], [0, 0, 0, 0, 0, 1, 6, 7, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 7], [0, 0, 3, 0, 0, 2, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 5]], [[1, 0, 0, 0, 8, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 2, 0], [0, 2, 0, 0, 0, 0, 7, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0], [9, 0, 0, 0, 0, 0, 0, 0, 0], [0, 8, 0, 0, 0, 0, 0, 0, 9], [0, 0, 1, 0, 0, 0, 5, 6, 0], [0, 9, 4, 0, 0, 0, 2, 0, 0]], [[0, 7, 0, 0, 0, 0, 0, 0, 0], [0, 0, 1, 0, 0, 0, 0, 0, 7], [0, 0, 0, 0, 0, 0, 9, 0, 8], [0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 9, 0, 0, 0], [0, 0, 0, 5, 0, 0, 0, 0, 0], [0, 3, 0, 0, 0, 0, 0, 0, 0], [1, 0, 0, 7, 9, 0, 4, 0, 0], [7, 0, 0, 0, 0, 0, 0, 0, 3]], [[0, 0, 0, 0, 3, 0, 0, 6, 1], [0, 0, 0, 9, 0, 0, 0, 0, 0], [0, 4, 0, 0, 0, 6, 0, 0, 0], [0, 0, 0, 0, 4, 0, 0, 0, 0], [0, 7, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 5, 0], [0, 0, 0, 0, 0, 0, 0, 0, 7], [0, 0, 0, 0, 9, 5, 0, 0, 0], [4, 0, 0, 0, 0, 0, 9, 0, 0]], [[0, 0, 0, 0, 0, 0, 2, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 6, 0, 0, 3, 0, 0], [2, 0, 6, 7, 0, 0, 0, 0, 4], [0, 0, 4, 0, 0, 0, 0, 0, 6], [6, 0, 0, 1, 0, 0, 0, 0, 0], [0, 0, 0, 0, 3, 0, 0, 0, 0], [4, 0, 0, 0, 0, 0, 8, 0, 0]], [[0, 0, 0, 0, 0, 0, 1, 0, 0], [0, 0, 0, 0, 0, 0, 5, 4, 0], [0, 4, 0, 1, 0, 0, 2, 0, 0], [8, 5, 2, 0, 0, 0, 0, 0, 7], [0, 0, 0, 0, 0, 0, 3, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 9, 0, 0], [0, 0, 5, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 3, 0]], [[0, 0, 0, 3, 0, 0, 0, 0, 0], [0, 3, 0, 0, 0, 0, 9, 7, 6], [0, 0, 0, 0, 0, 0, 0, 0, 0], [8, 0, 0, 0, 0, 0, 0, 0, 0], [2, 0, 0, 0, 8, 3, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0], [9, 5, 7, 0, 0, 0, 0, 0, 0], [0, 0, 3, 0, 0, 0, 7, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0]], [[5, 8, 0, 0, 4, 0, 0, 0, 0], [0, 0, 0, 0, 7, 0, 0, 3, 0], [0, 0, 4, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 5, 0, 0, 0, 0, 0, 0, 0], [0, 4, 0, 0, 0, 6, 0, 0, 2], [0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 1, 0, 0, 0, 2, 0, 0], [4, 0, 0, 0, 2, 0, 0, 0, 0]]]];
            function shuffle(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }
            
            function gen() {
                document.getElementById("submit").innerHTML = "Submit";
                diff = 0;
                if (document.getElementById("difficulty").value == "Medium") {
                    diff = 1
                }
                else if (document.getElementById("difficulty").value == "Hard") {
                    diff = 2
                }
                finalTemplate = templates[diff][Math.floor(Math.random() * templates[diff].length)]

                if(Math.floor(Math.random() * 10) < 5) {
                    for (row of finalTemplate) {
                        row.reverse();
                    }
                }
                if(Math.floor(Math.random() * 10) < 5) {
                    finalTemplate.reverse();
                }

                const strToint = shuffle(['a','b','c','d','e','f','g','h','i']);

                board = "";
                cellRow = 0;
                for (rows of finalTemplate) {
                    cellColumn = 0;
                    board += "<tr>\n";
                    for(cell of rows) {
                        readonly = "";
                        border = "";
                        background = "";
                        if (cell == 0) {
                            cell = "";
                        }
                        else {
                            //cell = strToint.indexOf(cell) + 1;
                            readonly = "readonly";
                            background = "background-color: lightgrey;"
                        }
                        if ((cellColumn + 1) % 3 == 0) {
                            background += "border-right-style: Solid;";
                        }
                        if ((cellRow + 1) % 3 == 0) {
                            border += "border-Bottom-style: Solid;";
                        }
                        board += "<td style=\"border-width: 8px;" + border + "\"><input style=\"" + background + "\" id=\"cell." + cellRow +"."+ cellColumn + "\" inputmode=\"numeric\" pattern=\"[0-9]*\" value=\"" + cell + "\"" + readonly + "/></td>\n";
                        cellColumn++;
                    }
                    cellRow++;
                    board += "</tr>"
                }
                document.getElementById("board").innerHTML = board;
            }
            function checkResult() {
                var temp = [[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];
                for (i = 0; i < 9; i++) {
                    for (j = 0; j < 9; j++) {
                        tempString = "cell."+i+"."+j;
                        console.log(tempString);
                        //temp[i][j]
                        let inVal = document.getElementById(tempString).value;
                        if (!inVal) {
                            temp[i][j] = 0;
                        }
                        else {
                            temp[i][j] = parseInt(inVal);
                        }
                    }
                }
                for (row of temp) {
                    var index = 0;
                    console.log(temp);
                    while (index > -1) {
                        index = row.indexOf(0);
                        if (index > -1) {
                        row.splice(index, 1);
                        }
                    }
                }
                
                for (i = 0; i < 9; i++) {
                    temp1 = [0,0,0,0,0,0,0,0,0];
                    for (j = 0; j < 9; j++) {
                        temp1[j] = temp[j][i];
                    }
                    temp2 = new Set();
                    for (cell of temp1) {
                        temp2.add(cell)
                    }
                    if (temp2.size != 9){
                        document.getElementById("submit").innerHTML = "Resubmit";
                        console.log("Failure of Column");
                        return null;
                    }
                }
                for (row of temp) {
                    temp2 = new Set();
                    for (cell of row) {
                        temp2.add(cell)
                    }
                    if (temp2.size != 9){
                        document.getElementById("submit").innerHTML = "Resubmit";
                        console.log("Failure of Row");
                        return null;
                    }
                }

                document.getElementById("submit").innerHTML = "You Did it";
            }
        </script>
    </head>
    <body onload="gen();">
        <table id="board">
        </table>
        <div id="controls">
            <button id="submit" onclick="checkResult();">Submit</button><button onclick="gen();">New Puzzle</button>
            <br>
            <select id="difficulty">
                <option value="Easy">Easy</option>
                <option value="Medium">Medium</option>
                <option value="Hard">Hard</option>
            </select>
        </div>
    </body>
</html>